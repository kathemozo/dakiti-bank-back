(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{7478:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/clientes",function(){return t(2332)}])},1242:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var a=t(5893),r=(t(7294),t(5376));t(1877);function o(e){var n=e.labels,t=e.datasets,o={labels:n,datasets:t},s={labels:n,datasets:e.datasetsPie||t},i={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},type:"bar",scales:{xAxes:[{barThickness:73,categorySpacing:0}]}};return(0,a.jsxs)("div",{style:{display:"flex",height:"100%"},children:[(0,a.jsx)("div",{style:{width:"50%",padding:8},children:(0,a.jsx)(r.$Q,{data:o,options:i})}),(0,a.jsx)("div",{style:{width:"50%",padding:8},children:(0,a.jsx)(r.by,{data:s,options:i})})]})}},2332:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var a=t(4051),r=t.n(a),o=t(5893),s=t(7294),i=t(2351),c=t(3369),u=t(7590),l=t(649),d=t(381),f=t.n(d),h=t(1242);function p(e,n,t,a,r,o,s){try{var i=e[o](s),c=i.value}catch(u){return void t(u)}i.done?n(c):Promise.resolve(c).then(a,r)}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var n=function(){for(var e="0123456789ABCDEF".split(""),n="#",t=0;t<6;t++)n+=e[Math.floor(16*Math.random())];return n},t=(0,s.useState)({fechaFrom:f()().format("MM/DD/YYYY"),fechaTo:f()().format("MM/DD/YYYY")}),a=t[0],d=t[1],v=(0,s.useState)([]),b=v[0],g=v[1],y=(0,s.useState)(!1),x=y[0],Y=y[1],w=(0,s.useState)([]),j=w[0],_=w[1],D=(0,s.useState)([]),M=D[0],k=D[1],O=function(){var e,t=(e=r().mark((function e(){var t,o,s,i,c,u,d,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k([]),_([]),g([]),Y(!0),e.next=8,(0,l.j0)("/api/admin/reporte-trasacciones",a);case 8:if((o=e.sent).ok){e.next=12;break}return Y(!1),e.abrupt("return");case 12:for(h in s={},null===(t=o.data)||void 0===t||t.transacciones.forEach((function(e){var n=e.usuario.nombre?e.usuario.nombre+" "+e.usuario.apellido:"Pago con tarjeta";s.hasOwnProperty(n)?(s[n].transacciones+=1,s[n].primera_transaccion=f()(e.fecha).format("DD/MM/YYYY HH:mm")):(s[n]={},s[n].transacciones=1,s[n].primera_transaccion=f()(e.fecha).format("DD/MM/YYYY HH:mm"),s[n].ultima_transaccion=f()(e.fecha).format("DD/MM/YYYY HH:mm"))})),i=[],c=[],u=[],d=[],s)c.push(h),u.push(s[h].transacciones),s[h].transacciones,d.push(n()),i.push([h,s[h].primera_transaccion,s[h].ultima_transaccion,s[h].transacciones]);k(c),_([{label:["Transacciones"],data:u,backgroundColor:d,borderColor:[],borderWidth:1}]),g(i),Y(!1),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),Y(!1),console.log(e.t0);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})),function(){var n=this,t=arguments;return new Promise((function(a,r){var o=e.apply(n,t);function s(e){p(o,a,r,s,i,"next",e)}function i(e){p(o,a,r,s,i,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(c.Z,{filtersForm:a,handleFormChange:function(e){var n=e.target.name,t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){m(e,n,t[n])}))}return e}({},a);console.log(e.target),t[n]=e.target.value,d(t)},submitConsulta:O}),(0,o.jsx)("div",{style:{height:"calc(100vh - 230px)",marginTop:10},children:(0,o.jsx)(u.Z,{headers:["Nombre Cliente","Fecha primera transacci\xf3n en la consulta","Fecha ultima transacci\xf3n en la consulta","Cantidad de transacciones"],data:b,loading:x,paginate:!0})}),(0,o.jsx)("div",{style:{height:"calc(100vh - 230px)",marginTop:10},children:(0,o.jsx)(h.Z,{labels:M,datasets:j})})]})}}},function(e){e.O(0,[885,570,778,813,426,254,396,774,888,179],(function(){return n=7478,e(e.s=n);var n}));var n=e.O();_N_E=n}]);